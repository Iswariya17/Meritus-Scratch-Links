const ArgumentType = require('../../extension-support/argument-type');
const BlockType = require('../../extension-support/block-type');
const Cast = require('../../util/cast');
const log = require('../../util/log');
const LanguageDetect = require('languagedetect');
const lngDetector = new LanguageDetect();
const detect = require('@chattylabs/language-detection')
const blockIconURI = "data:image/png;base64,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UmVhZHlxyWU8AAADI2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTQ1MkM3NzJEOTMxMTFFQThCNDBEODczRkYzNjkxNjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTQ1MkM3NzNEOTMxMTFFQThCNDBEODczRkYzNjkxNjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NDUyQzc3MEQ5MzExMUVBOEI0MEQ4NzNGRjM2OTE2MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NDUyQzc3MUQ5MzExMUVBOEI0MEQ4NzNGRjM2OTE2MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pgw7BKsAABvzSURBVHja7FwJeFTluf7ObJmZJDOTkBBCCJAJsQkCsgliFRBECi4g1K1lUcoVLW6g4m5UtD629nKrVq21ar3SYh/11gpqVRZB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";


var franc = require('franc-min');
const Message = {
  train_label_1: {
   
    'en': 'result'
    
},
 label_block: {
    
    'en': 'language'
    
  }

}
class Scratch3Language {
    constructor (runtime) {
        this.runtime = runtime;
		this.value;
    }

    getInfo () {
        return {
            id: 'Language',
            name: 'LR w Scratch',
			blockIconURI: blockIconURI, 
            blocks: [
                {
                    opcode: 'writeLog',
                   blockType: BlockType.COMMAND,
                    text: 'Recognize language [TEXT]',
                    arguments: {
                        TEXT: {
                            type: ArgumentType.STRING,
                            defaultValue: "hai,there"
                        }
                    }
                },
				 {
			opcode: 'result',
			text:'Language recognition result'[this.value],
			blockType: BlockType.REPORTER
			}
            ],
            menus: {
            }
        };
    }

    writeLog (args) {
        const text = Cast.toString(args.TEXT);
      /*  let son = franc(text, {minLength: 3});
		console.log(son);
        //let moon = console.log(lngDetector.getLanguages(text, 2));
        //console.log(franc.all(text));
        return son;
        log.log(text);
      */
	  //console.log(lngDetector.detect(text,1));
       const result = detect(text)
	   const language = result.language
	   console.log(result);
	   this.value = language
	   //return language;
	  
    } 
	
	 result() {
		let son = this.value;
		switch(son) {
  case 'en':
    return 'english';
    break;
  case 'fr':
    return 'french';
    break;
  case 'ar':
    return 'Arabic';
    break;
  case 'az':
    return 'Azerbaijani';
    break;
  case 'bg':
    return 'Bulgarian';
    break;
  case 'bn':
    return 'Bengali';
    break;
  case 'bs':
    return 'Bosnian';
    break;
  case 'ca':
    return 'Catalan';
    break;
  case 'cs':
    return 'Czech';
    break; 
  case 'cy':
    return 'Welsh';
    break;
  case 'da':
    return 'Danish';
    break;
  case 'dv':
    return 'Divehi, Dhivehi, Maldivian';
    break;
  case 'de':
    return 'German';
    break;
  case 'el':
    return 'Greek';
    break;
  case 'es':
    return 'Spanish';
    break;
  case 'et':
    return 'Estonian';
    break;
  case 'eu':
    return 'Basque';
    break;
  case 'fi':
    return 'Finnish';
    break;	
  case 'fa':
    return 'Persian (Farsi)';
    break;	
  case 'gl':
    return 'Galician';
    break;
  case 'ha':
    return 'Hausa';
    break;	
  case 'he':
    return 'Hebrew';
    break;
  case 'hi':
    return 'Hindi';
    break;
  case 'hr':
    return 'Croatian';
    break;
  case 'ht':
    return 'Haitian Creole';
    break;
  case 'hy':
    return 'Armenian';
    break;
  case 'hu':
    return 'Hungarian';
    break;
  case 'id':
    return 'Indonesian';
    break;
  case 'is':
    return 'Icelandic';
    break;
  case 'it':
    return 'Italian';
    break;
  case 'ja':
    return 'Japanese';
    break;
  case 'jv':
    return 'Javanese';
    break;
  case 'km':
    return 'Khmer';
    break;
  case 'ko':
    return 'Korean';
    break;		
  case 'la':
    return 'Latin';
    break;
  case 'lt':
    return 'Lithuanian';
    break;
  case 'lv':
    return 'Latvian (Lettish)';
    break;
 case 'mk':
    return 'Macedonian';
    break;
 case 'ml':
   return 'Malayalam';
   break;
 case 'mn':
   return 'Mangolian';
   break;
 case 'mr':
   return 'Marathi';
   break;
 case 'ms':
   return 'Malay';
   break;
 case 'ne':
   return 'Nepali';
   break;
 case 'nl':
   return 'Dutch';
   break;
 case 'no':
   return 'Norwegian';
   break;
 case 'pl':
   return 'Polish';
   break;
 case 'ps':
   return 'Pashto';
   break;
 case 'pt':
   return 'Portugese';
   break;
 case 'ro':
   return 'Romanian';
   break;
 case 'ru':
   return 'Russian';
   break;
 case 'si':
   return 'Sinhalese';
   break;
 case 'sk':
   return 'Slovak';
   break;
 case 'sl':
   return 'Slovenian';
   break;
 case 'sq':
   return 'Albanian';
   break;
 case 'sr':
   return 'Serbian';
   break;
 case 'su':
   return 'Sundanese';
   break;
 case 'sv':
   return 'Swedish';
   break;
 case 'sw':
   return 'Swahili';
   break;
 case 'ta':
   return 'Tamil';
   break;
 case 'th':
   return 'Thai';
   break;
 case 'tl':
   return 'Tagalog';
   break;
 case 'tr':
   return 'Turkish';
   break;
 case 'uk':
   return 'Ukrainian';
   break;
 case 'ur':
   return 'Urdu';
   break;
 case 'vi':
   return 'Vietnamese';
   break;
 case 'wo':
   return 'Wolof';
   break;
 case 'xh':
   return 'Xhosa';
   break;
 case 'yo':
   return 'Yoruba';
   break;
 case 'zu':
   return 'Zulu';
   break;
 case 'tn':
   return 'Setswana';
   break;
 case 'und':
   return 'undefined language';
   break;
 case 'zh_CN':
   return 'Mandrin Simplified';
   break;
 case 'zh_TW':
   return 'Mandrin traditional';
   break;
	
  default:
    return son;
}
  
  }
}

module.exports = Scratch3Language;